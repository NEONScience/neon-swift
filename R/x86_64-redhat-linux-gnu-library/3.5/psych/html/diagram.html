<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Helper functions for drawing path model diagrams</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for diagram {psych}"><tr><td>diagram {psych}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Helper functions for drawing path model diagrams</h2>

<h3>Description</h3>

<p>Path models are used to describe structural equation models or cluster analytic output.  These functions provide the primitives for drawing path models.  Used as a substitute for some of the functionality of Rgraphviz.</p>


<h3>Usage</h3>

<pre>
diagram(fit,...)
dia.rect(x, y = NULL, labels = NULL,  cex = 1,  xlim = c(0, 1), ylim = c(0, 1), ...)
dia.ellipse(x, y = NULL, labels = NULL, cex=1,e.size=.05, xlim=c(0,1), ylim=c(0,1),  ...) 
dia.triangle(x, y = NULL, labels =NULL,  cex = 1, xlim=c(0,1),ylim=c(0,1),...)
dia.ellipse1(x,y,e.size=.05,xlim=c(0,1),ylim=c(0,1),...)
dia.shape(x, y = NULL, labels = NULL, cex = 1, 
         e.size=.05, xlim=c(0,1), ylim=c(0,1), shape=1, ...)
dia.arrow(from,to,labels=NULL,scale=1,cex=1,adj=2,both=FALSE,pos=NULL,l.cex,gap.size,...)
dia.curve(from,to,labels=NULL,scale=1,...)
dia.curved.arrow(from,to,labels=NULL,scale=1,both=FALSE,dir=NULL,...)
dia.self(location,labels=NULL,scale=.8,side=2,...)
dia.cone(x=0, y=-2, theta=45, arrow=TRUE,curves=TRUE,add=FALSE,labels=NULL,
      xlim = c(-1, 1), ylim=c(-1,1),... ) 
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>fit</code></td>
<td>
<p>The results from a factor analysis <code><a href="fa.html">fa</a></code>, components analysis  <code><a href="principal.html">principal</a></code>, omega reliability analysis, <code><a href="omega.html">omega</a></code>, cluster analysis  <code><a href="ICLUST.html">iclust</a></code>, topdown (bassAckward) <code><a href="bassAckward.html">bassAckward</a></code> or confirmatory factor analysis, cfa, or structural equation model,sem, using the lavaan package.</p>
</td></tr>
<tr valign="top"><td><code>x</code></td>
<td>
<p>x coordinate of a rectangle or ellipse</p>
</td></tr>
<tr valign="top"><td><code>y</code></td>
<td>
<p>y coordinate of a rectangle or ellipse</p>
</td></tr>
<tr valign="top"><td><code>e.size</code></td>
<td>
<p>The size of the ellipse (scaled by the number of variables</p>
</td></tr>
<tr valign="top"><td><code>labels</code></td>
<td>
<p>Text to insert in rectangle, ellipse, or arrow</p>
</td></tr>
<tr valign="top"><td><code>cex</code></td>
<td>
<p>adjust the text size</p>
</td></tr>
<tr valign="top"><td><code>l.cex</code></td>
<td>
<p>Adjust the text size in arrows, defaults to 
cex which in turn defaults to 1</p>
</td></tr>
<tr valign="top"><td><code>gap.size</code></td>
<td>
<p>Tweak the gap in an arrow to be allow the label to be in a gap</p>
</td></tr>
<tr valign="top"><td><code>adj</code></td>
<td>
<p>Where to put the label along the arrows (values are then divided by 4)</p>
</td></tr>
<tr valign="top"><td><code>both</code></td>
<td>
<p>Should the arrows have arrow heads on both ends?</p>
</td></tr>
<tr valign="top"><td><code>scale</code></td>
<td>
<p>modifies size of rectangle and ellipse as well as the curvature of curves.  (For curvature, positive numbers are concave down and to the left</p>
</td></tr>
<tr valign="top"><td><code>from</code></td>
<td>
<p>arrows and curves go from </p>
</td></tr>
<tr valign="top"><td><code>to</code></td>
<td>
<p>arrows and curves go to</p>
</td></tr>
<tr valign="top"><td><code>location</code></td>
<td>
<p>where is the rectangle?</p>
</td></tr>
<tr valign="top"><td><code>shape</code></td>
<td>
<p>Which shape to draw</p>
</td></tr>
<tr valign="top"><td><code>xlim</code></td>
<td>
<p>default ranges</p>
</td></tr>
<tr valign="top"><td><code>ylim</code></td>
<td>
<p>default ranges</p>
</td></tr>
<tr valign="top"><td><code>side</code></td>
<td>
<p>Which side of boxes should errors appear</p>
</td></tr>
<tr valign="top"><td><code>theta</code></td>
<td>
<p>Angle in degrees of vectors</p>
</td></tr>
<tr valign="top"><td><code>arrow</code></td>
<td>
<p>draw arrows for edges in dia.cone</p>
</td></tr>
<tr valign="top"><td><code>add</code></td>
<td>
<p>if TRUE, plot on previous plot</p>
</td></tr>
<tr valign="top"><td><code>curves</code></td>
<td>
<p>if TRUE, draw curves between arrows in dia.cone</p>
</td></tr>
<tr valign="top"><td><code>pos</code></td>
<td>
<p>The position of the text in . Follows the text positions of 1, 2, 3, 4 or NULL</p>
</td></tr>
<tr valign="top"><td><code>dir</code></td>
<td>
<p>Should the direction of the curve be calculated dynamically, or set as &quot;up&quot; or &quot;left&quot;</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Most graphic parameters may be passed here</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The diagram function calls  <code><a href="fa.diagram.html">fa.diagram</a></code>, <code><a href="omega.graph.html">omega.diagram</a></code>,  <code><a href="iclust.diagram.html">ICLUST.diagram</a></code>, <code><a href="structure.diagram.html">lavaan.diagram</a></code> or <code><a href="bassAckward.html">bassAckward</a></code>.diagram depending upon the class of the fit input.  See those functions for particular parameter values.
</p>
<p>The remaining functions are the graphic primitives used by <code><a href="fa.diagram.html">fa.diagram</a></code>, <code><a href="structure.diagram.html">structure.diagram</a></code>, <code><a href="omega.graph.html">omega.diagram</a></code>, <code><a href="iclust.diagram.html">ICLUST.diagram</a></code> and <code><a href="fa.diagram.html">het.diagram</a></code>
</p>
<p>They create rectangles, ellipses or triangles surrounding text, connect them to straight or curved arrows, and can draw an arrow from and to the same rectangle.  
</p>
<p>Each shape (ellipse, rectangle or triangle) has a left, right, top and bottom and center coordinate that may be used to connect the arrows. 
</p>
<p>Curves are double-headed arrows.   By default they go from one location to another and curve either left or right (if going up or down) or up or down (going left to right).  The direction of the curve may be set by dir=&quot;up&quot; for left right curvature.
</p>
<p>The helper functions were developed to get around the infelicities associated with trying to install Rgraphviz and graphviz. 
</p>
<p>These functions form the core of <code><a href="fa.diagram.html">fa.diagram</a></code>,<code><a href="fa.diagram.html">het.diagram</a></code>. 
</p>
<p>Better documentation will be added as these functions get improved.  Currently the helper functions are just a work around for Rgraphviz.
</p>
<p>dia.cone draws a cone with (optionally) arrows as sides and centers to show the problem of factor indeterminacy. 
</p>


<h3>Value</h3>

<p>Graphic output</p>


<h3>Author(s)</h3>

<p>William Revelle
</p>


<h3>See Also</h3>

<p>The diagram functions that use the dia functions:  <code><a href="fa.diagram.html">fa.diagram</a></code>, <code><a href="structure.diagram.html">structure.diagram</a></code>, <code><a href="omega.graph.html">omega.diagram</a></code>, and <code><a href="iclust.diagram.html">ICLUST.diagram</a></code>.
</p>


<h3>Examples</h3>

<pre>
#first, show the primitives
xlim=c(-2,10)
ylim=c(0,10)
plot(NA,xlim=xlim,ylim=ylim,main="Demonstration of diagram functions",axes=FALSE,xlab="",ylab="")
ul &lt;- dia.rect(1,9,labels="upper left",xlim=xlim,ylim=ylim)
ml &lt;- dia.rect(1,6,"middle left",xlim=xlim,ylim=ylim)
ll &lt;- dia.rect(1,3,labels="lower left",xlim=xlim,ylim=ylim)
bl &lt;- dia.rect(1,1,"bottom left",xlim=xlim,ylim=ylim)
lr &lt;- dia.ellipse(7,3,"lower right",xlim=xlim,ylim=ylim,e.size=.07)
ur &lt;- dia.ellipse(7,9,"upper right",xlim=xlim,ylim=ylim,e.size=.07)
mr &lt;- dia.ellipse(7,6,"middle right",xlim=xlim,ylim=ylim,e.size=.07)
lm &lt;- dia.triangle(4,1,"Lower Middle",xlim=xlim,ylim=ylim)
br &lt;- dia.rect(9,1,"bottom right",xlim=xlim,ylim=ylim) 
dia.curve(from=ul$left,to=bl$left,"double headed",scale=-1)

dia.arrow(from=lr,to=ul,labels="right to left")
dia.arrow(from=ul,to=ur,labels="left to right")
dia.curved.arrow(from=lr,to=ll,labels ="right to left")
dia.curved.arrow(to=ur,from=ul,labels ="left to right")
dia.curve(ll$top,ul$bottom,"right")  #for rectangles, specify where to point 

dia.curve(ll$top,ul$bottom,"left",scale=-1)  #for rectangles, specify where to point 
dia.curve(mr,ur,"up")  #but for ellipses, you may just point to it.
dia.curve(mr,lr,"down")
dia.curve(mr,ur,"up")
dia.curved.arrow(mr,ur,"up")  #but for ellipses, you may just point to it.
dia.curved.arrow(mr,lr,"down")  #but for ellipses, you may just point to it.

dia.curved.arrow(ur$right,mr$right,"3")
dia.curve(ml,mr,"across")
dia.curve(ur$right,lr$right,"top down",scale =2)
dia.curved.arrow(br$top,lr$right,"up")
dia.curved.arrow(bl,br,"left to right")
dia.curved.arrow(br,bl,"right to left",scale=-1)
dia.arrow(bl,ll$bottom)
dia.curved.arrow(ml,ll$right)
dia.curved.arrow(mr,lr$top)

#now, put them together in a factor analysis diagram
v9 &lt;- sim.hierarchical()
f3 &lt;- fa(v9,3,rotate="cluster")
fa.diagram(f3,error=TRUE,side=3) 
</pre>

<hr /><div style="text-align: center;">[Package <em>psych</em> version 1.9.12 <a href="00Index.html">Index</a>]</div>
</body></html>
